# 关于类 UNIX 系统的学习及其推荐书目

关于类 UNIX 系统及其在非 PC 端操作系统的市场中所占据的主导地位，如今业界的很多解释都倾向于批评 Windows 系列操作系统有可扩展性差、不够安全之类的缺点，个人认为这种说法多少有点倒果为因的嫌疑。这个问题真正的解释很大程度上只源自于这两类操作系统在相关领域先来后到的历史事实，且先来者有权制定行业标准罢了。下面，就让我们来简单回顾一下操作系统的发展历史。

## 类 UNIX 系统的发展历史及其影响

如果我们简单回顾一下历史就会发现，操作系统的发展动力源自于人们在使用计算机时的任务管理需求。众所周知，在计算机发展的启蒙时代，计算机上执行的任务都是由操作人员手动输入的。而随着要执行的计算任务越来越多，这种靠人力来编排任务的执行方式就越来越不能体现计算机的效率优势了，于是就出现了能进行自动化任务管理的批处理系统，这是最早期的计算机操作系统。但批处理系统只解决了任务在执行顺序上的编排问题，解决不了任务在等待输入期间的计算资源闲置问题，于是人们就开发出了能更合理分配计算资源的分时任务系统。而分时系统的出现也赋予了计算机同时应对多个用户的功能，这项功能使得不同的用户可以在同一时间段内共享同一台计算机上的资源，这正是当今绝大部分非 PC 端操作系统的原型。

再然后，随着越来越多型号各异计算机被生产出来，且这些计算机设备的厂商都会为其配上专用的操作系统（例如，今天的 Apple 公司依然在坚持这个做法），这意味着用户在更换不同型号电脑时就不得不学习新的操作系统，这是非常不利于计算机设备的普及的。为了解决这一问题，可移植的、分时操作系统的概念就随即就出现了。这一概念倡导让操作系统独立于硬件来实现，以求在不同硬件上提供相似的用户体验。这类操作系统的开发最早源自一个叫做 Multics 的项目，结果这个项目因为在设计目标上野心过大，不怎么成功 ，贝尔实验室的团队在撤出这个项目之后，在 Multics 上做减法，搞出了 UNIX。后来 UNIX 因为美国的反垄断法令和 AT&T 一系列错误的决策导致了推广问题，接口被加州理工伯克利分校重新实现，发展出了 BSD 这一组类 UNIX 系统，BSD 中有个系统叫 darwin，它是 macOS 和 iOS 的内核。除此之外，还有一位荷兰的大学教授 Andrew S. Tanenbaum 基于教学的需要，也基于 UNIX 的接口开发出了一个叫做 MINIX 的系统，而该系统又启发 Linus Torvalds 开发出了 Linux 内核项目，而后者正是 Ubuntu、CentOS、Android 等一众操作系统的内核。

在上述发展过程中，业界共同制定出了 POSIX 标准。POSIX 这个名称是由 Richard Stallman 应 IEEE 的要求而提议的一个易于记忆的名称。其中，POSI 是**Portable Operating System Interface（可移植操作系统接口）**的英文缩写，而 X 则表明其对 UNIX API 的传承。这个名称实际上是 IEEE 为要在各种 UNIX 操作系统上运行软件，而定义的一组相关 API 标准的总称， 该标准可以使得各个类 UNIX 操作系统之上的 C 程序重新编译即可运行，无需修改代码。也正是因为有了 POSIX 标准，原本就致力于重新实现 UNIX 接口的 Linux 项目、BSD 项目才能凭借着开源的优势迅速在非 PC 端的操作系统市场上占据了主导地位。另一方面，Windows 系列操作系统则因为早期专注于 PC 领域，忽视了对 POSIX 标准的遵守，因而失去了进入服务器、移动设备以及路由器等网络设备市场的先机，成为了后来者。

## 学习类 UNIX 系统的推荐书目

接下来，我将以推荐书目的形式来规划研究类 UNIX 系统的学习路线图，具体如下：

- 首先需要了解操作系统的基本概念。这方面的研究可参考《操作系统：设计与实现》（作者：Andrew S.Tanenbaum）这本书，该书会以 MINIX 为例讲解操作系统的概念。

- 在掌握了操作系统的基本概念以后，接下来就可以开始研究 Linux 的机制了。在这个方面可参考《Linux 内核设计与实现》（作者：Robert Love）这本书，该书将从概念上讲解 Linux 的运行机制。

- 在 Linux 内核运行机制有了一定的了解之后，就可以开始具体研究 Linux 内核源码了。这方面最值得推荐的书籍是《深入理解 Linux 内核》（作者：Daniel P. Bovet）这本书。在学习这本书时切记需要搭配 Linux 的内核代码一起研究，这将会是一个非常漫长，且需要一步一个脚印的过程。

- 在理解了 Linux 的内核实现之后，我们就可以选择一个具体的开发方向来进行下一步深入研究了。如果想研究设备驱动程序的开发，就可以参考《Linux 设备驱动程序》（作者：Corbet J.）这本书。如果想从事网络方面的开发，则可以参考《深入理解 Linux 网络技术内幕》这本书。需要指出的是，如今与 Linux 内核相关的工作，大多集中在一些嵌入式开发领域。所以，我们通常还需要阅读一些介绍主流 CPU 体系架构的资料。例如，ARM 就看对应的芯片手册，而 MIPS 可以参考 《see mips run》这本书（第一第二版都可以）。

除此之外，由于 Linux 本质上脱胎于 UNIX，所以在这类系统的应用层程序开发方面，也可以选择性地阅读以下书籍：

- 首先推荐的是《UNIX 环境高级编程》，如果能把该书中的示例都实践一遍，我们就会对整个 UNIX/Linux 的应用层编程有系统性的认识。

- 如果条件允许，我也会建议系统性地学习一下《UNIX 网络编程》(卷 1-2）这套书，这样一来，在应用层面上从事与网络应用相关的开发工作就基本上应该不会有太大的问题了。

最后要时时刻刻告诉自己，千万不要因为 Linux 内核的复杂性而产生畏难情绪，一步一个脚印地心无杂念地研究下去即可，研究本身就会给我们带来极大的快乐与成就感。重点是不要被当下浮躁的社会风气影响，少上社交网络，少看公众号和短视频，把时间花在有点意义的事情上。
