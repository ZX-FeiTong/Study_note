## 1.2 自动化测试概述

在上述Python语言的主要适用领域中，自动化测试也将是本书关注的一个重点话题，所以接下来，让我们来重点介绍一下什么是自动化测试。从广义上来说，一切通过计算机程序的方式来代替或辅助人工测试的行为都可以被视为测试的自动化。而如果从狭义上来说，自动化测试通常指的是测试工程师们利用工具记录用户操作并在后续测试中重复这些操Z作的过程，或者指通过编写脚本的方式来模拟人工测试的过程。总而言之，在软件测试工作中，自动化测试实际上是一个与人工测试相对的概念。它通常泛指软件测试工程师们使用独立于待测软件之外的自动化脚本或其他软件工具来完成测试任务并生成相应测试报告的这一整个工作流程。

### 1.2.1 测试自动化的意义

自动化测试的发展对于如今广为流行的、敏捷开发等主张的、持续交付和持续集成的开发方式而言，有着至关重要的意义。毕竟，随着我们在生产环境中开发的软件系统在规模上越来越庞大，对这些软件系统的测试也变得更加困难和复杂，这也使得传统的人工测试将越来越难以胜任相关的工作任务。因此，我们也越来越需要利用自动化软件测试技术来克服传统测试技术的许多问题，在原则上，只要某一软件的测试流程是已经确定了的，那么实现针对它的测试自动化在理论上就具备了一定的意义，毕竟这样做既可以让我们在工作效率上快速地执行一些重复但必须要完成的测试工作，也可以从工作规模上来完成一些人工测试几乎不可能完成的任务。

从具体层面上来说，自动化测试的本质就是通过制定一套严密的测试法则和评估标准，从而定义出一个完整的自动测试流程。也正因为如此，它才可以有效地避免测试工程师因某种惯性思维或迷信经验而导致的测试疏漏。下面，让我们通过举例来具体了解一下自动化在具体测试任务中的作用。

首先来看单元测试。单元测试的自动化被认为是极限编程和敏捷开发这一类新型开发方式的一个关键衍生，由它主导的开发过程通常被称之为测试驱动开发。在这一类开发活动中，单元测试的用例可以在开发人员编写完应用程序的业务代码之前就完成预先设计，并作为对这一部分业务目标的一种定义。然后，随着代码编写进度的不断推进，单元测试随之同步进行，代码中存在的Bug也将被不断找出，并被持续纠正和完善。由于开发人员能够及时发现缺陷然后立即作出改变，修复的代价大大减小，这种不断发展的开发方式被认为比瀑布模型这类开发结束再测试的方式更为可靠。正因为如此，在项目开发过程中使用单元测试框架来实现自动化测试也已经成为了目前软件开发行业的一大趋势。

接下来，让我们再来看看回归测试。如果读者之前做过一些软件测试的工作，大概都应该知道如果以人工测试的方式来对大量的低级接口进行回归测试将会是一件十分耗时费工的事情，况且这种寻找Bug的效率还非常低下。而一旦这部分的测试实现了自动化，日后的测试工作将可以高效循环完成。很多时候这是针对软件产品进行长期回归测试的高效方法。毕竟，早期一个微小的补丁中引入的回归问题可能在日后导致巨大的损失。

### 1.2.2 自动化测试的局限性

尽管从整个软件开发周期来看，自动化测试可以软件开发活动带来开支上的节省，但如果我们一味地追求将所有的测试工作完全自动化，那么对测试自动化本身的实现也有可能会在短期内给项目团队带来巨大的开销。毕竟，虽然测试本身可以实现“自动化”，但对测试脚本维护和编写仍然需要大量的人工来投入。因此在实际生产环境中，测试工程师们会根据软件测试的具体需求采用人工测试和自动化测试相结合的方法来完成相任务。通常情况下，我们将一项测试工作自动化需满足以下要求：

- **对测试用例的要求**：可被自动化的测试用例大多是目标项目在每次被修改之后都需要进行回归测试的重要部分。只有在这种情况下，对相关代码实现测试的自动化才能有效地降低人工测试消耗的人力物力。
- **对测试人员的要求**：由于在将测试自动化的过程中，测试用例和输出结果也都是由以代码的形式存在的，因此这就要求测试工程师们本身也必须具备编程语言的使用能力。当然了，某些测试自动化工具支持通过关键词指定测试步骤，因而免除了程序编写的过程，对测试人员而言也就不再要求他们掌握编程技术了。
- **对项目团队的要求**：是否要对测试过程实现自动化，最终还是要取决于开发目标项目的团队是否真的需要自动化，这需要项目团队的管理者根据要被测试的目标系统、测试工作的规模和种类、可使用的测试工具、人和组织的工作重心等因素进行综合考虑来做出决策。

对于上述要求中的最后一项，如果我们是某个项目团队的管理者，就需要具体了解究竟有哪几种测试是可以实现自动化的，只有这样我们才能根据项目进行回归测试的必要性、经济因素、被测系统成熟度来做出决定。下面，我们就来介绍一下自动化测试的分类。

### 1.2.3 自动化测试的分类

基于对测试工作的各种不同的目标和需求，我们通常会将可实现的自动化测试分类如下：

- **图形化界面测试**：在这一类测试中，测试工程师们会利用到许多自动化工具，这些工具会以播放宏记录用户在图形化界面（即GUI）上进行的鼠标点击、键盘输入等交互操作。然后在接下来的测试过程中，这些播放宏便可以自动模拟这些交互操作，并与正常情况下的交互反馈进行对比。这种方法虽然通常不要求测试人员具有软件开发经验，但它们存在着一些可靠性和维护性问题，即任何按钮的重命名或是移动都会让播放宏出现错误，这就需要我们重新录制这些播放宏。
- **Web界面测试**：这一类测试实际上是图形化界面的变种。在这里，我们要测试的“界面”不再是应用程序的GUI而是Web页面，由于Web页面是由HTML渲染器生成的用户界面，因此这类测试不必再聚焦于用户操作本身，而是代为渲染HTML并监听DOM事件来完成测试用例的记录与回放。在这里，像curl这样的无界面浏览器工具或Selenium Web Driver通常用于Web页面的测试工作。
- **接口测试**：接口测试是最为常见的软件测试任务之一，它通常需要测试工程师们能够排除图形化界面的影响，对软件功能本身进行测试。它是软件业务逻辑测试中非常关键的一步。通常在一个软件项目的早期阶段，接口测试就会开始执行来确保代码始终是准确无误的。接口测试也作为集成测试的一部分，用于判断系统是否满足功能、可靠性、性能表现和安全性的要求。由于接口测试不使用GUI，它主要通过字符方式与测试者进行交互。
- **性能测试**：性能测试是通过自动化的测试工具模拟多种正常、峰值以及异常负载条件来对系统的各项性能指标进行测试。负载测试和压力测试都属于性能测试，两者可以结合进行。通过负载测试，确定在各种工作负载下系统的性能，目标是测试当负载逐渐增加时，系统各项性能指标的变化情况。压力测试是通过确定一个系统的瓶颈或者不能接受的性能点，来获得系统能提供的最大服务级别的测试。
- **持续测试**： 持续测试是一个过程，它将自动化测试作为软件交付通道中内嵌的一部分，以尽快获得软件发布后业务风险的反馈。 自动化测试旨在生成一组与用户故事或应用程序要求相关的通过/失败的数据点。 另一方面，持续测试侧重于业务风险，并提供有关软件是否可以发布的判断。

### 学习自动化测试框架

这一里程碑是本书第在3章中要达成的目标，这一部分内容主要聚焦的是*自动化测试框架的实际运用*。在这里，自动化测试框架泛指的是某种为特定产品设置一系列特定测试规则并自动化执行这些规则的集成系统。这套系统中通常整合了各种用于测试的函数库、测试数据集、元数据和各种可重用模块。将这些模块按照测试需求组合起来便可以得到一个完整的，针对特定功能或应用场景的测试用例。测试框架为自动化测试提供基础，并简化了自动化测试的工作流程。

在当今基于Python的自动测试框架中，Selenium和Robot Framwork这两个框架是最主流的两种选择。其中，Selenium框架是一款面向Web应用程序的自动化测试框架，它是如今最常用的自动化测试工具之一，支持快速开发自动化测试框架，且支持在多种浏览器上执行测试。 Selenium框架的学习曲线比较平缓，对于编程经验不是很丰富的测试人员来说，Python+Selenium是个很好的选择。而Robot Framwork则是一款更为通用的、可扩展的关键字驱动的自动化测试框架，通常被专业的测试工程师们用于端到端地进行验收测试，例如用于验收测试驱动开发的成果，或者用于测试分布式异构应用程序中的各种接口。在第3章的内容中，我们模拟对第2章中开发的留言板项目进行单元测试、Web界面测试等各种类型的自动化测试，并引导读者如何快速上手Selenium和Robot Framwork这两个框架，以便实现在测试自动化领域的快速入门。

既然自动化测试有那么多优势，为什么还有那么多项目做失败了呢？

我个人有个推论：
1、公司自动化测试人员能力不够
2、项目难度太大，功能不稳定，需求变化太快，就盲目启动自动化，导致自动化脚本开发频繁改变，更不上需求变化的速度，最终以失败告终
3、项目过于复杂，大部分功能无法实现自动化，仅仅只有小部分功能实现自动化，这个对于项目意义不大。
4、公司人员流动大，导致自动化脚本维护的难度加大，最终夭折。
当然自动化测试还有个优势：自动化测试可以将产品的知识固化到脚本中，以降低测试人员流动对项目造成的影响。但是这个优势的前提是，这些脚本易于维护，这就需要一些必要的文档，这又是另一个议题了。
4、什么项目适合做自动化测试？
假如你已经决定要学习自动化测试了，如何学习是要面临的下一个问题？这个问题以被测试产品为出发点进行分析，假如你所学的技术不能得到应用（验证），将会使你的学习过程寸步难行。

首先考考虑产品是否适合做自动化测试。这方法比较普遍的共识是从三个方面进行权衡。
1、软件需求变动不频繁
测试脚本的稳定性决定了自动化测试的维护成本。如果软件需求变动过于频繁，测试人员需要根据变动的需求来更新测试用例以及相关的测试脚本，而脚本的维护本身就是一个代码开发的过程，需要修改、调试，必要的时候还要修改自动化测试的框架，如果所花费的成本不低于利用其节省的测试成本，那么自动化测试便是失败的。
　　项目中的某些模块相对稳定，而某些模块需求变动性很大。我们便可对相对稳定的模块进行自动化测试，而变动较大的仍是用人工测试。
2、项目周期较长
由于自动化测试需求的确定、自动化测试框架的设计、测试脚本的编写与调试均需要相当长的时间来完成。这样的过程本身就是一个测试软件的开发过程，需要较长的时间来完成。如果项目的周期比较短，没有足够的时间去支持这样一个过程，那么自动化测试便成为笑谈。
3、自动化测试脚本可重复使用
自动化测试脚本的重复使用要从三个方面来考量，一方面所测试的项目之间是否很大的差异性（如C/S系统和B/S系统的差异）；所选择的测试工具是否适应这种差异；最后，测试人员是否有能力开发出适应这种差异的自动化测试框架。
OK！讲明了上面那些事，我们现在可以学习自动化测试了

三、主流自动化测试框架
桌面程序的工具有：QTP、 AutoRunner
web应用的工具有：QTP、AutoRunner、Robot Framework、watir、selenium

手机App自动化测试：后续再分享

由于B/S架构的诸多优势，早几年前大量C/S架构的应用转为B/S结构。从而也推动了web开发与测试技术的发展。这也导致QTP框架的落寞，Selenium框架及Robot Framework框架的大量兴起。

假如，被测试有产品是C/S架构的，那么推荐QTP

如果，被测产品是B/S 结构，那么推荐selenium

为什么不是QTP 或其它工具？因为selenium 对B/S应用支持很好，更重要的一点，它支持多语言的开发，真正的试用selenium ，你所要掌握的不仅仅是一个工具而已，你还需要学习一门语言。我为什么要选择selenium？
目前市面主流自动化测试框架：

RFS: Robot Framework + Selenium
Selenium+unittest框架
那你说我们学什么？？？
自然选择主流框架，假如你决定使用selenium 了之后，你又面临了一个新的问题，选择一门语言。selenium 是支持java、python、ruby、php、C#、JavaScript 。
从语言易学性来讲，首选ruby ，python
从语言应用广度来讲，首选python，java、C#、php、
从语言相关测试技术成熟度（及 资料）来讲：python ,java，ruby ,

